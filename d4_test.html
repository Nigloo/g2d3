<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D4 Test</title>
        <style>
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
        </style>
        <script type="text/javascript" src="d3.v3.js"></script>
        <script type="text/javascript" src="d4.js"></script></script>
        <script type="text/javascript">
            
            "use strict";
            
            var g = new Graphic();
            
            var dataset = [
                {col1:5, col2:5, col3:10},
                {col1:10, col2:20, col3:20},
                {col1:20, col2:3, col3:32},
                {col1:40, col2:17, col3:44}];
            
            g.element({ position:[  function(d){return d.col1;},
                                    'data:col2'],
                        stroke_width:function(d,i){return i+1;},
                        stroke:function(d,i){return i;},
                        fill:"yellow"})
            .line({     stroke_width:3,
                        stroke:function(){return 'blue';},
                        fill:'none',
                        interpolation:'cardinal',
                        stroke_linecap:'round'})
            .circle({   radius:function(d,i){return 5*(i+1)+5;},
                        fill_opacity:0.5})
            .circle({   position:[10, 10],
                        stroke_width:function(d,i){return i%2==0?10:3;},
                        stroke:function(d,i){return Math.exp(i);},
                        stroke_opacity:function(d,i){return (i+1)/4;},
                        fill:'none',
                        radius:'data:col3',
                        stroke_dasharray:function(d,i){var a=1+i*2;return 2*a+','+a;}})
            .data(dataset)
            .plot({selector:"#graph", width:1024, height:768, margin:50});
            
            
/////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////
            
            var g = new Graphic();
            
            var dataset = [
                {col1:'A', col2:10, col3:'a',   col4:1,   col5:1},
                {col1:'A', col2:10, col3:2,   col4:3,   col5:2},
                {col1:'A', col2:10, col3:3,   col4:2,   col5:3},
                
                {col1:'B', col2:10, col3:3,   col4:2,   col5:4},
                {col1:'B', col2:10, col3:2,   col4:3,   col5:5},
                {col1:'B', col2:10, col3:1,   col4:1,   col5:6},
                
                {col1:'A', col2:20, col3:1.5, col4:1.1, col5:7},
                {col1:'A', col2:20, col3:2.5, col4:2.2, col5:8},
                {col1:'A', col2:20, col3:3.3, col4:3.3, col5:9},
                
                {col1:'B', col2:20, col3:3,   col4:3,   col5:10},
                {col1:'B', col2:20, col3:2,   col4:2,   col5:11},
                {col1:'B', col2:20, col3:1,   col4:1,   col5:12}];
                
            
            g.coord(new Rect({  x:1,
                                y:2,
                                subSys: new Rect({  x:3,
                                                    y:4})
                            }))
            .element({  position:[  'data:col1',
                                    'data:col2',
                                    'data:col3',
                                    'data:col4'],
                        stroke_width:3})
            .line(  {   fill:'none',
                        stroke:'black'})
            .circle({   radius:5,
                        fill:'data:col5'})
            .data(dataset)
            .plot({selector:"#graph", width:1024, height:768, margin:50});
            
/////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////
            
            var g = new Graphic();
            
            var dataset = [];
            for(var i = 0 ; i < 20 ; i++)
                dataset.push({col1:i+1});
            
            g.coord(new Polar({ theta:1,
                                radius:2}))
            .circle({   position:['data:col1', 'data:col1'],
                        radius:3})
            .data(dataset)
            .plot({selector:"#graph", width:1024, height:768, margin:50});
        
/////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////
            
            var g = new Graphic();
            
            var dataset = [];
            
            var ppsb = 10;
            for(var i = 0 ; i < ppsb ; i++) {
                dataset.push({col1:'increasing theta',col2:'increasing radius',col3:i,col4:i});
            }
            for(var i = 0 ; i < ppsb ; i++) {
                dataset.push({col1:'decreasing theta',col2:'increasing radius',col3:ppsb-i-1,col4:i});
            }
            for(var i = 0 ; i < ppsb ; i++) {
                dataset.push({col1:'increasing theta',col2:'decreasing radius',col3:i,col4:ppsb-i-1});
            }
            for(var i = 0 ; i < ppsb ; i++) {
                dataset.push({col1:'decreasing theta',col2:'decreasing radius',col3:ppsb-i-1,col4:ppsb-i-1});
            }
            
            g.coord(new Rect({  x:1,
                                y:2,
                                subSys: new Polar({ theta:3,
                                                    radius:4})
                            }))
            .circle({   position:[  'data:col1',
                                    'data:col2',
                                    'data:col3',
                                    'data:col4'],
                        radius:3,
                        fill:function(d,i){return i;},
                        stroke:'black'})
            .data(dataset)
            .plot({selector:"#graph", width:1024, height:768, margin_left:150, margin_bottom:40});
            
            
/////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////
            
            var g = new Graphic();
            
            var dataset = [];
            
            var ppsb = 10;
            for(var t = 0 ; t < 3 ; t++) {
                for(var i = 0 ; i < ppsb+t ; i++) {
                    dataset.push({col1:'A',col2:'C',col3:i,col4:i*(t+1),col5:t});
                }
                for(var i = 0 ; i < ppsb+t ; i++) {
                    dataset.push({col1:'B',col2:'C',col3:ppsb-i-1,col4:i*(t+1),col5:t});
                }
                for(var i = 0 ; i < ppsb+t ; i++) {
                    dataset.push({col1:'A',col2:'D',col3:i,col4:(ppsb-i-1)*(t+1),col5:t});
                }
                for(var i = 0 ; i < ppsb+t ; i++) {
                    dataset.push({col1:'B',col2:'D',col3:ppsb-i-1,col4:(ppsb-i-1)*(t+1),col5:t});
                }
            }
            
            g.coord(new Rect({  x:1,
                                y:2,
                                subSys: new Polar({ theta:3,
                                                    radius:4})
                            }))
            .time(new Temp({t1:     'data:col5'}))
            .element({  position:[  'data:col1',
                                    'data:col2',
                                    'data:col3',
                                    'data:col4']})
            .line({     fill:'none',
                        stroke:'red',
                        interpolation:function (d) {if(d.col1=='A'&&d.col2=='C'){
                                                        return 'linear';
                                                    } else if(d.col1=='A'&&d.col2=='D') {
                                                        return 'cardinal';
                                                    } else if(d.col1=='B'&&d.col2=='C') {
                                                        return 'step';
                                                    } else if(d.col1=='B'&&d.col2=='D') {
                                                        return 'basis';
                                                    }}})
            .circle({   radius:3,
                        fill:'data:col3',
                        stroke:'black'})
            .data(dataset)
            .plot({selector:"#graph", width:1024, height:768, margin_left:150, margin_bottom:40});
            
            function prev() {
                g.previousStep(1);
            }
            
            function next() {
                g.nextStep(1);
            }
               
        </script>
    </head>
    <body>
        <div id="graph"></div>
        <input type="button" value="Previous" onclick="prev()"/>
        <input type="button" value="Next" onclick="next()"/>
    </body>
</html>   
